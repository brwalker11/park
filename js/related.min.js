!function(){const e=[["Case Studies","#273d9a","Case Study"],["Guides","#0a7c6b","Guide"],["Articles","#3b3a3f","Article"]].reduce((e,[t,a,r])=>{const s=`grad-related-${r.toLowerCase().replace(/[^a-z0-9]+/g,"-")}`,n=`<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800" role="img" aria-label="${r}"><defs><linearGradient id="${s}" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="${a}" stop-opacity="0.95"/><stop offset="100%" stop-color="${a}" stop-opacity="0.7"/></linearGradient></defs><rect width="1200" height="800" fill="url(#${s})"/><text x="50%" y="54%" fill="white" font-family="'Inter', 'Helvetica Neue', Arial, sans-serif" font-weight="600" font-size="96" text-anchor="middle">${r}</text><text x="50%" y="66%" fill="white" fill-opacity="0.7" font-family="'Inter', 'Helvetica Neue', Arial, sans-serif" font-size="36" text-anchor="middle">Monetize Parking</text></svg>`;return e[t]=`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(n)}`,e},{}),t=document.getElementById("related-list"),a=document.querySelector("[data-resource-slug]");if(!t||!a)return;const r=a.getAttribute("data-resource-slug")||"",s=a.getAttribute("data-resource-category")||"",n=(a.getAttribute("data-resource-tags")||"").split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);function o(t){const a=Object.assign({},t),r=a.category&&e[a.category]?a.category:"Articles";return a.category=r,a.image=a.image||e[r],a.tags=Array.isArray(a.tags)?a.tags.map(e=>e.toLowerCase()):[],a._dateValue=a.date&&Date.parse(a.date)||0,a}fetch("/data/resources.json").then(e=>{if(!e.ok)throw new Error("Failed to fetch related resources");return e.json()}).then(e=>{!function(e){if(!e.length)return void(t.innerHTML='<p class="related-empty">More resources coming soon.</p>');t.innerHTML="";const a=document.createDocumentFragment();e.forEach(e=>{const t=document.createElement("a");t.className="related-card",t.href=e.url;const r=document.createElement("div");r.className="related-thumb";const s=document.createElement("img");s.loading="lazy",s.src=e.image,s.alt=e.title,r.appendChild(s);const n=document.createElement("div");n.className="related-content";const o=document.createElement("span");o.className="related-tag",o.textContent=e.category;const l=document.createElement("span");l.className="related-title",l.textContent=e.title;const i=document.createElement("span");i.className="related-read",i.textContent=e.readTime,n.appendChild(o),n.appendChild(l),n.appendChild(i),t.appendChild(r),t.appendChild(n),a.appendChild(t)}),t.appendChild(a)}(function(e){const t=e.filter(e=>e.slug!==r).map(e=>{const t=n.length?e.tags.filter(e=>n.includes(e)).length:0;return{item:e,sharedTags:t,sameCategory:s&&e.category===s?1:0}}),a=t.sort((e,t)=>t.sharedTags!==e.sharedTags?t.sharedTags-e.sharedTags:t.sameCategory!==e.sameCategory?t.sameCategory-e.sameCategory:(t.item._dateValue||0)-(e.item._dateValue||0)),o=a.filter(e=>e.sharedTags>0).slice(0,5),l=a.filter(e=>0===e.sharedTags&&e.sameCategory>0),i=a.filter(e=>0===e.sharedTags&&0===e.sameCategory),c=[...o];l.concat(i).forEach(e=>{c.length>=5||c.find(t=>t.item.slug===e.item.slug)||c.push(e)}),c.length<3&&a.forEach(e=>{c.length>=5||c.find(t=>t.item.slug===e.item.slug)||c.push(e)});return c.slice(0,5).map(e=>e.item)}(e.map(o)))}).catch(()=>{t.innerHTML='<p class="related-empty">We couldn\'t load related resources right now.</p>'})}();